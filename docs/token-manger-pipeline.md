# Дано

1. `Token manager`

Контракт, умеющий получать набор токенов от `Token lock` контракта, инвестировать их
в defi протоколы.

## Добавление `Token manager` контракта в `Token lock`

1. Указывается доля токенов, которыми может управлять `Token manager` (0<x<100)
2. TODO: как ончейн определить каким `Token manager` закрывать запросy?

## Вывод токенов из тона, превышающий объем токенов на `Token lock` контракте

- Если запрос на вывод не может быть закрыт мгновенно, то он сохраняется в `Token lock` контракт с `id`.
- Любой пользователь может попытаться закрыть запрос на вывод по `id`, если на `Token lock`
оказалось достаточное число токенов.

TODO: частичное закрытие?

TODO: как определить приоритет на закрытие?

- Каждый `Token manager` имеет read метод для ответа на вопрос "Может ли данный token manager" закрыть
конкретный запрос
- После добавления запроса в очередь, пользователь может инициировать возврат токенов
с конкретного `Token manager` под закрытие запроса на вывод

TODO: добавление запроса и закрытие в одно действие?

## Ребаланс `Token manager` в соответствии с указанной долей

- Любой пользователь может вызвать метод у `Token manager`, который синхронизирует
количество токенов на `Token manager` с заявленной долей на `Token lock`.
То есть спишет токены и расширит позицию, или частично закроет и вернет токены на `Token lock`.

TODO: вознаграждение за синхронизацию?

## Депозит токенов с закрытием запроса на вывод

1. Любой пользователь может депонировать токены в eth-ton цепочку, дополнительно
указав `id[]` запросов. Генерируется дополнительный эвент.
В тоне можно выдать пользователю награду на стороне тона, как маркет мейкеру.

TODO: добавить этот механизм сразу или уровнем выше?

## Сбор состояния `Token lock` в эфире

TODO: какая гранулярность? [сеть X токен лок X токен менеджер]
- Надо чтобы у каждой сборки был уникальный айдишник, чтобы гарантировать
сбор статистики в один момент

TODO: реализовать интеграцию с компаундом до первичного запуска или оставить
такую возможность?
